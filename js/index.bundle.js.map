{"version":3,"sources":["webpack://proba/./src/js/views/base.js","webpack://proba/./src/js/models/Table.js","webpack://proba/./src/js/views/viewTable.js","webpack://proba/./src/js/asteroidStorage.js","webpack://proba/./src/js/index.js"],"names":["feedback","document","querySelector","selectFeedback","startDate","getElementById","loader","endDate","dateForm","asteroidList","table","tableBody","selectBox","selectOption","querySelectorAll","nodeListItem","tableList","prevButton","nextButton","asteroidsOption","pageNumber","chartContainer","loaderContainer","ASTEROID","this","records_per_page","start","end","nasaURL","nasaData","fetch","asteroidData","json","near_earth_objects","dateArray","Object","entries","asteroidInfoHazardous","asteroidHazardousArray","date","asteroidInfo","filter","currDate","is_potentially_hazardous_asteroid","map","item","tableDate","astName","name","astId","id","astSpeed","close_approach_data","relative_velocity","kilometers_per_hour","minRadius","estimated_diameter","meters","estimated_diameter_min","maxRadius","estimated_diameter_max","length","push","mergedAsteroidInfo","flat","Math","ceil","error","console","log","UI","currPage","current_page","parentElement","text","classList","add","innerHTML","setTimeout","remove","currentPage","info","asteroidTable","pageNum","i","asteroidInfoTable","numPages","tableElement","createElement","forEach","currAsteroid","opt","value","storageInfo","currentNumber","style","opacity","localList","names","ids","indices","index","listIndex","li","idValue","getElementsByTagName","asteroidName","textName","asteroidItem","optionList","idList","childNodes","dataset","indexOf","STORAGE","optionArr","dataLocal","localinfo","localStorage","setItem","JSON","stringify","parse","getItem","loadedIdList","loadedOptionList","loadedOptionArr","setOptionList","setIdList","setOptionArr","removeItem","selectedName","selectedId","indexArr","loadedSelectList","setLocalStorage","itemIndex","splice","asteroid","ui","storage","event","preventDefault","display","searchStart","searchEnd","startDay","Date","rez","showFeedback","removeLocalStorage","asteroidDate","then","renderSpinner","pageNumbers","updateStorage","catch","getAsteroids","uiSelect","prevPage","selectedPage","checkButtonOpacity","saveCurrPage","nextPage","addEventListener","e","target","nodeName","contains","parseInt","textContent","includes","nameSelected","idValues","selectItems","saveSelectList","removedItem","previousElementSibling","indexOfItem","removeSelectedItem","getCurrPage","updateSelection"],"mappings":"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","file":"js/index.bundle.js","sourcesContent":["export const elements = {\r\n  feedback: document.querySelector('.feedback'),\r\n  selectFeedback: document.querySelector('.select-feedback'),\r\n  startDate: document.getElementById('start-date-search'),\r\n  loader: document.querySelector('.loader-container'),\r\n  endDate: document.getElementById('end-date-search'),\r\n  dateForm: document.getElementById('asteroid-date'),\r\n  asteroidList: document.querySelector('.asteroid-list'),\r\n  table: document.querySelector('.asteroid-table'),\r\n  tableBody: document.querySelector('.asteroid-info'),\r\n  selectBox: document.getElementById('asteroids'),\r\n  selectOption: document.querySelectorAll('.option-element'),\r\n  nodeListItem: document.querySelectorAll('.list-item'),\r\n  tableList: document.querySelector('.asteroid-info'),\r\n  prevButton: document.getElementById('button-prev'),\r\n  nextButton: document.getElementById('button-next'),\r\n  asteroidsOption: document.getElementById('asteroids'),\r\n  pageNumber: document.querySelector('.page-number'),\r\n  chartContainer: document.querySelector('.chart-container'),\r\n  loaderContainer: document.querySelector('.loader-container'),\r\n};\r\n","import { api_key } from '../config';\r\n\r\nexport default class ASTEROID {\r\n  constructor() {\r\n    this.records_per_page = 4;\r\n  }\r\n\r\n  async asteroidDate(start, end) {\r\n    try {\r\n      //user url\r\n      const nasaURL = `https://api.nasa.gov/neo/rest/v1/feed?start_date=${start}&end_date=${end}&api_key=${api_key}`;\r\n      //nasa century url\r\n\r\n      //get data\r\n      const nasaData = await fetch(nasaURL);\r\n      const data = await nasaData.json();\r\n\r\n      let asteroidData = data.near_earth_objects;\r\n\r\n      const dateArray = Object.entries(asteroidData);\r\n      let asteroidInfoHazardous = [];\r\n      let asteroidHazardousArray = [];\r\n      for (let [date, asteroidInfo] of dateArray) {\r\n        asteroidInfoHazardous = asteroidInfo.filter(\r\n          (currDate) => currDate.is_potentially_hazardous_asteroid === true\r\n        );\r\n        asteroidInfoHazardous = asteroidInfoHazardous.map((item) => {\r\n          const tableDate = date;\r\n          const astName = item.name;\r\n          const astId = item.id;\r\n          const astSpeed =\r\n            item.close_approach_data[0].relative_velocity.kilometers_per_hour;\r\n          const minRadius =\r\n            item.estimated_diameter.meters.estimated_diameter_min;\r\n          const maxRadius =\r\n            item.estimated_diameter.meters.estimated_diameter_max;\r\n          return { tableDate, astId, astName, astSpeed, minRadius, maxRadius };\r\n        });\r\n        if (asteroidInfoHazardous.length) {\r\n          asteroidHazardousArray.push(asteroidInfoHazardous);\r\n        }\r\n      }\r\n      const mergedAsteroidInfo = asteroidHazardousArray.flat();\r\n\r\n      const numPages = Math.ceil(\r\n        mergedAsteroidInfo.length / this.records_per_page\r\n      );\r\n\r\n      return [mergedAsteroidInfo, numPages];\r\n    } catch (error) {\r\n      console.log(error);\r\n\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n","import { elements } from './base';\r\n\r\nexport default class UI {\r\n  constructor(currPage) {\r\n    this.current_page = currPage;\r\n    this.records_per_page = 4;\r\n    this.parentElement = document.querySelector('.loader-container');\r\n  }\r\n\r\n  //show feedback\r\n  showFeedback(text, feedback) {\r\n    feedback.classList.add('showItem');\r\n    feedback.innerHTML = `<p>${text}</p>`;\r\n    setTimeout(() => {\r\n      feedback.classList.remove('showItem');\r\n    }, 3000);\r\n  }\r\n  renderSpinner() {\r\n    setTimeout(() => {\r\n      elements.loaderContainer.classList.add('visible-loader');\r\n    }, 2000);\r\n  }\r\n\r\n  prevPage(currentPage, info) {\r\n    this.current_page = currentPage;\r\n    this.asteroidTable(info);\r\n  }\r\n\r\n  nextPage(currentPage, info) {\r\n    this.current_page = currentPage;\r\n    this.asteroidTable(info);\r\n  }\r\n\r\n  pageNumbers(info) {\r\n    const pageNum = info[1];\r\n    elements.pageNumber.innerHTML = '';\r\n\r\n    for (let i = 1; i < pageNum + 1; i++) {\r\n      elements.pageNumber.innerHTML +=\r\n        \"<span class='clickPageNumber'>\" + i + '</span>';\r\n    }\r\n  }\r\n  asteroidTable(asteroidInfoTable) {\r\n    const numPages = asteroidInfoTable[1];\r\n    const info = asteroidInfoTable[0];\r\n\r\n    if (this.current_page < 1) {\r\n      this.current_page = 1;\r\n    }\r\n    if (this.current_page > numPages - 1) {\r\n      this.current_page = numPages;\r\n    }\r\n\r\n    elements.tableBody.innerHTML = '';\r\n    for (\r\n      let i = (this.current_page - 1) * this.records_per_page;\r\n      i < this.current_page * this.records_per_page && i < info.length;\r\n      i++\r\n    ) {\r\n      const tableElement = document.createElement('tr');\r\n      tableElement.classList.add('table-element');\r\n      tableElement.innerHTML = '';\r\n      tableElement.innerHTML = `\r\n              <td class=\"fly-date\">${info[i].tableDate}</td>\r\n              <td class=\"name\">${info[i].astName}</td>\r\n              <td class=\"speed\">${info[i].astSpeed}</td>\r\n              <td class=\"min-radius\">${info[i].minRadius}</td>\r\n              <td class=\"max-radius\">${info[i].maxRadius}</td>`;\r\n      elements.tableBody.insertAdjacentElement('beforeend', tableElement);\r\n    }\r\n\r\n    while (elements.selectBox.childNodes.length > 2) {\r\n      elements.selectBox.removeChild(elements.selectBox.lastChild);\r\n    }\r\n\r\n    //  autocomplete box\r\n    info.forEach((currAsteroid) => {\r\n      const opt = document.createElement('option');\r\n      opt.classList.add('option-element');\r\n\r\n      opt.value = currAsteroid.astId;\r\n      opt.innerHTML = currAsteroid.astName;\r\n\r\n      elements.selectBox.appendChild(opt);\r\n    });\r\n\r\n    elements.startDate.value = '';\r\n    elements.endDate.value = '';\r\n  }\r\n\r\n  selectedPage(currPage, storageInfo) {\r\n    let currentNumber = document.querySelectorAll('.clickPageNumber');\r\n    let pageNumber = storageInfo[1];\r\n    for (let i = 0; i < pageNumber; i++) {\r\n      if (i == currPage - 1) {\r\n        currentNumber[i].style.opacity = '1.0';\r\n      } else {\r\n        currentNumber[i].style.opacity = '0.5';\r\n      }\r\n    }\r\n  }\r\n  checkButtonOpacity(currPage, storageInfo) {\r\n    let pageNumber = storageInfo[1];\r\n    if (currPage == 1) {\r\n      elements.prevButton.classList.add('opacity');\r\n      elements.nextButton.classList.remove('opacity');\r\n    } else if (currPage == pageNumber) {\r\n      elements.nextButton.classList.add('opacity');\r\n    } else {\r\n      elements.prevButton.classList.remove('opacity');\r\n      elements.nextButton.classList.remove('opacity');\r\n    }\r\n  }\r\n\r\n  updateSelection(localList) {\r\n    const names = localList[0];\r\n    const ids = localList[1];\r\n    const indices = localList[2];\r\n    names.forEach((name, index) => {\r\n      const id = ids[index];\r\n      const listIndex = indices[index];\r\n      const li = document.createElement('li');\r\n      li.classList.add('list-item');\r\n      li.innerHTML = `<div class=\"asteroids-item\" data-listIndex=\"${listIndex}\">${name}</div>\r\n                        <a href=\"#\" class=\"delete-icon\" data-id=\"${id}\"\r\n                         ><i class=\"fas fa-times\"> </i\r\n                          ></a>\r\n                       `;\r\n      elements.asteroidList.appendChild(li);\r\n    });\r\n  }\r\n  selectItems(listIndex) {\r\n    const idValue = document.getElementsByTagName('option')[listIndex].value;\r\n    const asteroidName = document.getElementsByTagName('option')[listIndex]\r\n      .text;\r\n    const li = document.createElement('li');\r\n    li.classList.add('list-item');\r\n    li.innerHTML = `<div class=\"asteroids-item\" data-listIndex=\"${listIndex}\">${asteroidName}</div>\r\n                      <a href=\"#\" class=\"delete-icon\" data-id=\"${idValue}\"\r\n                       ><i class=\"fas fa-times\"></i\r\n                        ></a>\r\n                     `;\r\n    elements.asteroidList.appendChild(li);\r\n\r\n    return [asteroidName, idValue];\r\n  }\r\n\r\n  // remove item\r\n  removeItem(textName, asteroidItem) {\r\n    let optionList = [];\r\n    let idList = [];\r\n\r\n    document.querySelectorAll('.list-item').forEach((item) => {\r\n      optionList.push(item.childNodes[0].innerHTML);\r\n      idList.push(item.childNodes[2].dataset.id);\r\n    });\r\n\r\n    // remove from list\r\n    elements.asteroidList.removeChild(asteroidItem);\r\n    const indexOfItem = optionList.indexOf(textName);\r\n\r\n    return [indexOfItem];\r\n  }\r\n}\r\n","export default class STORAGE {\r\n  constructor() {\r\n    this.optionArr = [];\r\n    this.optionList = [];\r\n    this.idList = [];\r\n  }\r\n\r\n  // update local  storage\r\n  updateStorage(dataLocal) {\r\n    const localinfo = dataLocal[0];\r\n    const pageNum = dataLocal[1];\r\n    localStorage.setItem('asteroidDataLocal', JSON.stringify(localinfo));\r\n    localStorage.setItem('numOfPages', JSON.stringify(pageNum));\r\n  }\r\n  getAsteroids() {\r\n    let asteroids = JSON.parse(localStorage.getItem('asteroidDataLocal'));\r\n    let pages = JSON.parse(localStorage.getItem('numOfPages'));\r\n    return [asteroids, pages];\r\n  }\r\n\r\n  loadedSelectList() {\r\n    let loadedIdList;\r\n    let loadedOptionList;\r\n    let loadedOptionArr;\r\n    loadedIdList = localStorage.getItem('idList')\r\n      ? JSON.parse(localStorage.getItem('idList'))\r\n      : [];\r\n    loadedOptionList = localStorage.getItem('optionList')\r\n      ? JSON.parse(localStorage.getItem('optionList'))\r\n      : [];\r\n    loadedOptionArr = localStorage.getItem('optionArr')\r\n      ? JSON.parse(localStorage.getItem('optionArr'))\r\n      : [];\r\n\r\n    return [loadedOptionList, loadedIdList, loadedOptionArr];\r\n  }\r\n\r\n  setLocalStorage(setOptionList, setIdList, setOptionArr) {\r\n    localStorage.removeItem('idList');\r\n    localStorage.removeItem('optionList');\r\n    localStorage.removeItem('optionArr');\r\n    localStorage.setItem('idList', JSON.stringify(setIdList));\r\n    localStorage.setItem('optionList', JSON.stringify(setOptionList));\r\n    localStorage.setItem('optionArr', JSON.stringify(setOptionArr));\r\n  }\r\n  removeLocalStorage() {\r\n    localStorage.removeItem('idList');\r\n    localStorage.removeItem('optionList');\r\n    localStorage.removeItem('optionArr');\r\n  }\r\n  saveCurrPage(currPage) {\r\n    localStorage.removeItem('currentPage');\r\n    localStorage.setItem('currentPage', JSON.stringify(currPage));\r\n  }\r\n  getCurrPage() {\r\n    let currPages = JSON.parse(localStorage.getItem('currentPage'));\r\n    return currPages;\r\n  }\r\n  saveSelectList(selectedName, selectedId, indexArr) {\r\n    [this.optionList, this.idList, this.optionArr] = this.loadedSelectList();\r\n\r\n    this.idList.push(selectedId);\r\n    this.optionList.push(selectedName);\r\n    this.optionArr.push(indexArr);\r\n    this.setLocalStorage(this.optionList, this.idList, this.optionArr);\r\n  }\r\n\r\n  removeSelectedItem(itemIndex) {\r\n    [this.optionList, this.idList, this.optionArr] = this.loadedSelectList();\r\n\r\n    this.optionList.splice(itemIndex, 1);\r\n    this.idList.splice(itemIndex, 1);\r\n    this.optionArr.splice(itemIndex, 1);\r\n    this.setLocalStorage(this.optionList, this.idList, this.optionArr);\r\n  }\r\n}\r\n","import '../scss/style.scss';\r\nimport { elements } from './views/base';\r\nimport ASTEROID from './models/Table';\r\nimport UI from './views/viewTable';\r\nimport STORAGE from './asteroidStorage';\r\n\r\n(function () {\r\n  let currPage = 1;\r\n  const asteroid = new ASTEROID();\r\n  const ui = new UI(currPage);\r\n  const storage = new STORAGE();\r\n  elements.loaderContainer.classList.remove('visible-loader');\r\n\r\n  /* Table controller */\r\n\r\n  elements.dateForm.addEventListener('submit', (event) => {\r\n    event.preventDefault();\r\n    elements.loaderContainer.classList.remove('visible-loader');\r\n    ['table-section', 'select-section'].forEach(function (id) {\r\n      document.getElementById(id).style.display = 'block';\r\n    });\r\n    const searchStart = elements.startDate.value;\r\n    const searchEnd = elements.endDate.value;\r\n    const one_day = 1000 * 60 * 60 * 24;\r\n\r\n    const startDay = Date.parse(searchStart);\r\n    const endDay = Date.parse(searchEnd);\r\n    const rez = (endDay - startDay) / one_day;\r\n\r\n    if (searchStart === '' && searchEnd === '') {\r\n      ui.showFeedback('Molimo Vas, unesite datum', elements.feedback);\r\n    } else if (rez > 7) {\r\n      ui.showFeedback(\r\n        'Maksimalni period između dva datuma je 7 dana, molimo Vas unesite datume u skladu sa zahtevom',\r\n        elements.feedback\r\n      );\r\n    } else if (rez < 0) {\r\n      ui.showFeedback(\r\n        'Početni datum mora biti pre završnog, molimo Vas unesite pravilno parametre',\r\n        elements.feedback\r\n      );\r\n    } else {\r\n      elements.asteroidList.innerHTML = '';\r\n      storage.removeLocalStorage();\r\n      //ui.renderSpinner();\r\n\r\n      asteroid\r\n        .asteroidDate(searchStart, searchEnd)\r\n        .then((asteroidInfo) => {\r\n          ui.renderSpinner();\r\n\r\n          ui.asteroidTable(asteroidInfo);\r\n          ui.pageNumbers(asteroidInfo);\r\n          storage.updateStorage(asteroidInfo);\r\n        })\r\n        .catch((error) => console.log(error));\r\n    }\r\n    ui.renderSpinner();\r\n  });\r\n\r\n  /* pagination  */\r\n  elements.prevButton.addEventListener('click', () => {\r\n    const storageInfo = storage.getAsteroids();\r\n    if (currPage > 1) {\r\n      currPage--;\r\n      const uiSelect = new UI(currPage);\r\n      uiSelect.prevPage(currPage, storageInfo);\r\n      uiSelect.selectedPage(currPage, storageInfo);\r\n      uiSelect.checkButtonOpacity(currPage, storageInfo);\r\n      storage.saveCurrPage(currPage);\r\n    }\r\n  });\r\n  elements.nextButton.addEventListener('click', () => {\r\n    const storageInfo = storage.getAsteroids();\r\n    if (currPage < storageInfo[1]) {\r\n      currPage++;\r\n      const uiSelect = new UI(currPage);\r\n      uiSelect.nextPage(currPage, storageInfo);\r\n      uiSelect.selectedPage(currPage, storageInfo);\r\n      uiSelect.checkButtonOpacity(currPage, storageInfo);\r\n\r\n      storage.saveCurrPage(currPage);\r\n    }\r\n  });\r\n\r\n  document.addEventListener('click', (e) => {\r\n    const storageInfo = storage.getAsteroids();\r\n    if (\r\n      e.target.nodeName == 'SPAN' &&\r\n      e.target.classList.contains('clickPageNumber')\r\n    ) {\r\n      ui.current_page = parseInt(e.target.textContent);\r\n      ui.selectedPage(ui.current_page, storageInfo);\r\n      ui.checkButtonOpacity(ui.current_page, storageInfo);\r\n\r\n      ui.asteroidTable(storageInfo);\r\n      storage.saveCurrPage(ui.current_page);\r\n    }\r\n  });\r\n\r\n  /*** Drop-down list controller *****/\r\n\r\n  elements.selectBox.addEventListener('change', () => {\r\n    const optionArr = localStorage.getItem('optionArr')\r\n      ? JSON.parse(localStorage.getItem('optionArr'))\r\n      : [];\r\n    elements.selectBox.options[0].disabled = true;\r\n    const listIndex = elements.selectBox.selectedIndex;\r\n\r\n    if (optionArr.includes(listIndex)) {\r\n      ui.showFeedback(\r\n        'Asteroid koji ste izabrali vec postoji u izabranoj listi, molimo Vas izaberite drugi asteroid',\r\n        elements.selectFeedback\r\n      );\r\n    } else {\r\n      const [nameSelected, idValues] = ui.selectItems(listIndex);\r\n      storage.saveSelectList(nameSelected, idValues, listIndex);\r\n    }\r\n  });\r\n\r\n  elements.asteroidList.addEventListener(\r\n    'click',\r\n    function (e) {\r\n      e.preventDefault();\r\n\r\n      const removedItem = e.target.parentElement;\r\n      if (removedItem.classList.contains('delete-icon')) {\r\n        const textName = removedItem.previousElementSibling.innerHTML;\r\n        const asteroidItem = e.target.parentElement.parentElement;\r\n\r\n        const indexOfItem = ui.removeItem(textName, asteroidItem);\r\n\r\n        storage.removeSelectedItem(indexOfItem);\r\n      }\r\n    },\r\n    false\r\n  );\r\n\r\n  document.addEventListener('DOMContentLoaded', () => {\r\n    elements.loaderContainer.classList.remove('visible-loader');\r\n    const asteroids = storage.getAsteroids();\r\n    if (asteroids[0] !== null) {\r\n      ui.current_page = storage.getCurrPage();\r\n      currPage = storage.getCurrPage();\r\n\r\n      ui.pageNumbers(storage.getAsteroids());\r\n\r\n      ui.asteroidTable(storage.getAsteroids());\r\n\r\n      ui.selectedPage(currPage, storage.getAsteroids());\r\n      ui.checkButtonOpacity(currPage, storage.getAsteroids());\r\n\r\n      ui.updateSelection(storage.loadedSelectList());\r\n      ui.renderSpinner();\r\n    }\r\n    ui.renderSpinner();\r\n  });\r\n})();\r\n"],"sourceRoot":""}